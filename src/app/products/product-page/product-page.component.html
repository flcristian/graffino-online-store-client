<ng-container *ngIf="productState.state$ | async as state">
  <main *ngIf="state.product as product" class="p-10">
    <section class="flex flex-row justify-center gap-2">
      <img onclick="image_zoom.showModal()"
           class="max-h-136 rounded-xl object-cover self-end shadow-gray-400 shadow-lg cursor-zoom-in"
           src="{{product.imageUrl}}" alt="PRODUCT IMAGE">

      <dialog id="image_zoom" class="modal">
        <form method="dialog" class="modal-backdrop">
          <button>close</button>
        </form>
        <div class="modal-box relative p-2 max-w-fit">
          <div class="absolute modal-action z-20 right-7">
            <form method="dialog">
              <button class="btn btn-circle btn-accent font-bold">X</button>
            </form>
          </div>
          <div class="carousel max-w-fit rounded-lg">
            <div class="carousel-item relative max-w-fit">
              <img src="{{product.imageUrl}}" class="w-256 h-auto" />
            </div>
          </div>
        </div>
      </dialog>
      <section class="xl:col-span-2 min-w-96">
        <div class="flex flex-col bg-base-100 shadow-xl p-5 justify-between gap-16 rounded-lg">
          <div>
            <h1 class="text-3xl font-bold text-primary text-shadow">{{product.name}}</h1>
            <h2 class="text-2xl text-secondary font-bold text-shadow">${{product.price.toFixed(2)}}</h2>
          </div>
          <div class="flex flex-col gap-2">
            <h1 class="text-2xl font-bold text-primary text-shadow">Details:</h1>
            <div class="flex flex-col">
              <div *ngFor="let property of product.productProperties" class="flex flex-row gap-2">
                <h2 class="text-lg text-primary font-bold text-shadow">{{property.property.name}}:</h2>
                <h2 class="text-lg text-secondary text-shadow">{{property.value}}</h2>
              </div>
            </div>
          </div>
          <button class="btn btn-primary" (click)="addToCart(product)">Add To Cart</button>
        </div>
      </section>
    </section>
  </main>
  <ng-template #noProduct>
    <main class="flex flex-col justify-center items-center p-10 text-center">
      <h1 class="text-3xl text-primary">Product doesn't exist</h1>
    </main>
  </ng-template>
</ng-container>
